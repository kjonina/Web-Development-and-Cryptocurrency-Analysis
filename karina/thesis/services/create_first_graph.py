# Downloading necessary files
import numpy as np
import pandas as pd
import yfinance as yf
from matplotlib import pyplot
import matplotlib.pyplot as plt
from datetime import datetime
import datetime as dt
import plotly.graph_objects as go
import plotly.graph_objs as go
import plotly.express as px
from plotly.subplots import make_subplots
import plotly.io as pio
import plotly.offline as py

from plotly.offline import download_plotlyjs, plot

#https://stackoverflow.com/questions/36846395/embedding-a-plotly-chart-in-a-django-template

def create_first_graph(request, crypto_name):

    close = [457.33401489, 424.44000244, 394.79598999, 408.9039917 ,
       398.8210144 , 402.15200806, 435.79098511, 423.20498657,
       411.57400513, 404.42498779, 399.51998901, 377.18099976,
       375.4670105 , 386.94400024, 383.61499023, 375.07199097,
       359.51199341, 328.86599731, 320.51000977, 330.07901001,
       336.18701172, 352.94000244, 365.02600098, 361.56201172,
       362.29901123, 378.54901123, 390.41400146, 400.86999512,
       394.77301025, 382.55599976, 383.75799561, 391.44198608,
       389.54598999, 382.84500122, 386.4750061 , 383.1579895 ,
       358.41699219, 358.34500122, 347.27099609, 354.70401001,
       352.98901367, 357.61801147, 335.59100342, 345.30499268,
       338.3210144 , 325.74899292, 325.89199829, 327.5539856 ,
       330.49200439, 339.48599243, 349.29000854, 342.41500854,
       345.48800659, 363.26400757, 366.92401123, 367.69500732,
       423.56100464, 420.73498535, 397.81799316, 376.13299561,
       387.88198853, 387.4079895 , 375.19799805, 380.55499268,
       357.83999634, 350.84799194, 352.92001343, 367.57299805,
       376.90100098, 375.34799194, 368.36999512, 369.67001343,
       376.44699097, 375.49099731, 378.04699707, 379.24499512,
       381.31500244, 375.01000977, 369.60400391, 376.85400391,
       374.78500366, 375.09500122, 361.90899658, 352.21899414,
       346.36499023, 350.50601196, 352.54199219, 347.37600708,
       351.63198853, 345.34500122, 327.06201172, 319.77600098,
       311.39599609, 317.84298706, 329.95599365, 320.84298706,
       331.88598633, 334.57199097, 322.53399658, 319.00799561,
       327.92401123, 315.86300659, 317.23901367, 312.67001343,
       310.73699951, 320.19299316, 314.24899292, 315.03201294,
       281.08200073, 264.19500732, 274.47399902, 286.18899536,
       294.33700562, 283.34899902, 290.4079895 , 274.79598999,
       265.66000366, 267.79598999, 225.86099243, 178.10299683,
       209.84399414, 208.09700012, 199.25999451, 210.33900452,
       214.86099243, 211.31500244, 226.89700317, 233.40600586,
       232.8789978 , 247.84700012, 253.71800232, 273.47299194,
       263.4750061 , 233.91499329, 233.51300049, 226.42500305,
       217.46400452, 226.97200012, 238.22900391, 227.26800537,
       226.85299683, 217.11099243, 222.26600647, 227.7539978 ,
       223.41200256, 220.11000061, 219.83900452, 219.18499756,
       221.76400757, 235.42700195, 257.3210144 , 234.82499695,
       233.84300232, 243.61000061, 236.32600403, 240.28300476,
       243.77900696, 244.53399658, 235.977005  , 238.89199829,
       238.73500061, 237.47000122, 236.42599487, 253.82800293,
       254.26300049, 260.20199585, 275.67001343, 281.70199585,
       273.0920105 , 276.17800903, 272.72299194, 276.26098633,
       274.35400391, 289.60699463, 291.76000977, 296.3789978 ,
       294.35400391, 285.33700562, 281.88500977, 286.39300537,
       290.59298706, 285.50500488, 256.29901123, 260.92800903,
       261.74899292, 260.0249939 , 267.95999146, 266.73999023,
       245.59500122, 246.19700623, 248.53199768, 247.02900696,
       252.79800415, 242.71299744, 247.52600098, 244.22399902,
       247.27200317, 253.00500488, 254.32200623, 253.69700623,
       260.59799194, 255.49200439, 253.17999268, 245.02200317,
       243.67599487, 236.07200623, 236.55200195, 236.15299988,
       224.58700562, 219.15899658, 223.83299255, 228.57299805,
       222.88200378, 223.35600281, 222.6000061 , 224.62600708,
       235.26899719, 234.17599487, 236.46200562, 231.26800537,
       226.38999939, 219.42999268, 229.28599548, 225.85499573,
       225.80799866, 236.14500427, 232.07899475, 234.92999268,
       240.35800171, 239.01800537, 236.1210022 , 229.78199768,
       237.33399963, 243.86300659, 241.83200073, 240.29600525,
       242.15800476, 241.11199951, 236.3769989 , 236.92900085,
       237.60499573, 236.15299988, 236.80200195, 233.12800598,
       231.94700623, 234.01800537, 235.34399414, 240.3480072 ,
       238.87199402, 240.95300293, 237.11000061, 237.11599731,
       237.28300476, 237.40800476, 237.09599304, 233.34500122,
       230.19000244, 222.92599487, 225.80299377, 225.87399292,
       224.32400513, 224.95199585, 225.6190033 , 222.8809967 ,
       228.48899841, 229.04800415, 228.80299377, 229.70500183,
       229.98199463, 232.4019928 , 233.54299927, 236.82299805,
       250.89500427, 249.28399658, 249.00700378, 244.60600281,
       245.21200562, 243.94400024, 246.99000549, 244.29600525,
       240.51499939, 242.79899597, 243.59399414, 250.99000549,
       249.01100159, 257.06399536, 263.07199097, 258.6210022 ,
       255.41200256, 256.33599854, 260.88598633, 271.91299438,
       269.02999878, 266.20700073, 270.78500366, 269.22799683,
       284.89401245, 293.11499023, 310.86700439, 292.0539856 ,
       287.46398926, 285.82901001, 278.08898926, 279.47198486,
       274.90100098, 273.61401367, 278.98098755, 275.83300781,
       277.22198486, 276.04901123, 288.27801514, 288.69699097,
       292.68600464, 293.62399292, 294.42700195, 289.58999634,
       287.72198486, 284.6499939 , 281.60101318, 282.61401367,
       281.22698975, 285.21798706, 281.88198853, 278.57699585,
       279.58499146, 260.99700928, 265.08300781, 264.47000122,
       270.38598633, 266.37600708, 264.07998657, 265.67999268,
       261.55099487, 258.50698853, 257.97601318, 211.07899475,
       226.68400574, 235.3500061 , 232.56900024, 230.38999939,
       228.16900635, 210.49499512, 221.60899353, 225.83099365,
       224.76899719, 231.39599609, 229.77999878, 228.76100159,
       230.05599976, 228.1210022 , 229.28399658, 227.18299866,
       230.29800415, 235.01899719, 239.83999634, 239.84700012,
       243.60699463, 238.16799927, 238.477005  , 240.10699463,
       235.22900391, 230.51199341, 230.64399719, 230.30400085,
       229.09100342, 229.80999756, 232.9750061 , 231.49299622,
       231.21200562, 227.08500671, 230.61799622, 230.28300476,
       234.52900696, 235.14399719, 234.33999634, 232.75700378,
       239.14199829, 236.68699646, 236.05999756, 237.54899597,
       237.29299927, 238.72999573, 238.25900269, 240.38299561,
       246.06300354, 242.96899414, 242.30400085, 243.93099976,
       244.94099426, 247.05000305, 245.30799866, 249.50799561,
       251.98899841, 254.32000732, 262.86898804, 270.64001465,
       261.64300537, 263.43701172, 269.4630127 , 266.27200317,
       274.02301025, 276.4960022 , 281.6539917 , 283.67999268,
       285.29998779, 293.78799438, 304.61801147, 313.85501099,
       328.01501465, 314.16598511, 325.43099976, 361.18899536,
       403.41699219, 411.56298828, 386.35400391, 374.47000122,
       386.48199463, 373.36801147, 380.25698853, 336.81900024,
       311.08401489, 338.15200806, 336.75299072, 332.90600586,
       320.16598511, 330.75100708, 335.09399414, 334.58999634,
       326.14898682, 322.02200317, 326.92700195, 324.53601074,
       323.04598999, 320.04598999, 328.20599365, 352.68399048,
       358.04199219, 357.38101196, 371.29400635, 377.3210144 ,
       362.48800659, 359.18701172, 361.04598999, 363.18301392,
       388.94900513, 388.7829895 , 395.53601074, 415.56298828,
       417.56298828, 415.47900391, 451.93798828, 434.99700928,
       433.75500488, 444.18200684, 465.3210144 , 454.93399048,
       456.07800293, 463.61599731, 462.32199097, 442.68499756,
       438.63900757, 436.57199097, 442.40100098, 454.98498535,
       455.65301514, 417.27398682, 422.82299805, 422.2789917 ,
       432.98300171, 426.61999512, 430.56698608, 434.33401489,
       433.43798828, 430.01098633, 433.09100342, 431.95999146,
       429.10501099, 458.04800415, 453.23001099, 447.61099243,
       447.99099731, 448.42800903, 435.69000244, 432.3710022 ,
       430.30599976, 364.33099365, 387.53601074, 382.29901123,
       387.16799927, 380.14898682, 420.23001099, 410.26199341,
       382.49200439, 387.49099731, 402.9710083 , 391.72601318,
       392.15301514, 394.97198486, 380.28900146, 379.47399902]

    date = ['2014-09-17', '2014-09-18', '2014-09-19', '2014-09-20',
       '2014-09-21', '2014-09-22', '2014-09-23', '2014-09-24',
       '2014-09-25', '2014-09-26', '2014-09-27', '2014-09-28',
       '2014-09-29', '2014-09-30', '2014-10-01', '2014-10-02',
       '2014-10-03', '2014-10-04', '2014-10-05', '2014-10-06',
       '2014-10-07', '2014-10-08', '2014-10-09', '2014-10-10',
       '2014-10-11', '2014-10-12', '2014-10-13', '2014-10-14',
       '2014-10-15', '2014-10-16', '2014-10-17', '2014-10-18',
       '2014-10-19', '2014-10-20', '2014-10-21', '2014-10-22',
       '2014-10-23', '2014-10-24', '2014-10-25', '2014-10-26',
       '2014-10-27', '2014-10-28', '2014-10-29', '2014-10-30',
       '2014-10-31', '2014-11-01', '2014-11-02', '2014-11-03',
       '2014-11-04', '2014-11-05', '2014-11-06', '2014-11-07',
       '2014-11-08', '2014-11-09', '2014-11-10', '2014-11-11',
       '2014-11-12', '2014-11-13', '2014-11-14', '2014-11-15',
       '2014-11-16', '2014-11-17', '2014-11-18', '2014-11-19',
       '2014-11-20', '2014-11-21', '2014-11-22', '2014-11-23',
       '2014-11-24', '2014-11-25', '2014-11-26', '2014-11-27',
       '2014-11-28', '2014-11-29', '2014-11-30', '2014-12-01',
       '2014-12-02', '2014-12-03', '2014-12-04', '2014-12-05',
       '2014-12-06', '2014-12-07', '2014-12-08', '2014-12-09',
       '2014-12-10', '2014-12-11', '2014-12-12', '2014-12-13',
       '2014-12-14', '2014-12-15', '2014-12-16', '2014-12-17',
       '2014-12-18', '2014-12-19', '2014-12-20', '2014-12-21',
       '2014-12-22', '2014-12-23', '2014-12-24', '2014-12-25',
       '2014-12-26', '2014-12-27', '2014-12-28', '2014-12-29',
       '2014-12-30', '2014-12-31', '2015-01-01', '2015-01-02',
       '2015-01-03', '2015-01-04', '2015-01-05', '2015-01-06',
       '2015-01-07', '2015-01-08', '2015-01-09', '2015-01-10',
       '2015-01-11', '2015-01-12', '2015-01-13', '2015-01-14',
       '2015-01-15', '2015-01-16', '2015-01-17', '2015-01-18',
       '2015-01-19', '2015-01-20', '2015-01-21', '2015-01-22',
       '2015-01-23', '2015-01-24', '2015-01-25', '2015-01-26',
       '2015-01-27', '2015-01-28', '2015-01-29', '2015-01-30',
       '2015-01-31', '2015-02-01', '2015-02-02', '2015-02-03',
       '2015-02-04', '2015-02-05', '2015-02-06', '2015-02-07',
       '2015-02-08', '2015-02-09', '2015-02-10', '2015-02-11',
       '2015-02-12', '2015-02-13', '2015-02-14', '2015-02-15',
       '2015-02-16', '2015-02-17', '2015-02-18', '2015-02-19',
       '2015-02-20', '2015-02-21', '2015-02-22', '2015-02-23',
       '2015-02-24', '2015-02-25', '2015-02-26', '2015-02-27',
       '2015-02-28', '2015-03-01', '2015-03-02', '2015-03-03',
       '2015-03-04', '2015-03-05', '2015-03-06', '2015-03-07',
       '2015-03-08', '2015-03-09', '2015-03-10', '2015-03-11',
       '2015-03-12', '2015-03-13', '2015-03-14', '2015-03-15',
       '2015-03-16', '2015-03-17', '2015-03-18', '2015-03-19',
       '2015-03-20', '2015-03-21', '2015-03-22', '2015-03-23',
       '2015-03-24', '2015-03-25', '2015-03-26', '2015-03-27',
       '2015-03-28', '2015-03-29', '2015-03-30', '2015-03-31',
       '2015-04-01', '2015-04-02', '2015-04-03', '2015-04-04',
       '2015-04-05', '2015-04-06', '2015-04-07', '2015-04-08',
       '2015-04-09', '2015-04-10', '2015-04-11', '2015-04-12',
       '2015-04-13', '2015-04-14', '2015-04-15', '2015-04-16',
       '2015-04-17', '2015-04-18', '2015-04-19', '2015-04-20',
       '2015-04-21', '2015-04-22', '2015-04-23', '2015-04-24',
       '2015-04-25', '2015-04-26', '2015-04-27', '2015-04-28',
       '2015-04-29', '2015-04-30', '2015-05-01', '2015-05-02',
       '2015-05-03', '2015-05-04', '2015-05-05', '2015-05-06',
       '2015-05-07', '2015-05-08', '2015-05-09', '2015-05-10',
       '2015-05-11', '2015-05-12', '2015-05-13', '2015-05-14',
       '2015-05-15', '2015-05-16', '2015-05-17', '2015-05-18',
       '2015-05-19', '2015-05-20', '2015-05-21', '2015-05-22',
       '2015-05-23', '2015-05-24', '2015-05-25', '2015-05-26',
       '2015-05-27', '2015-05-28', '2015-05-29', '2015-05-30',
       '2015-05-31', '2015-06-01', '2015-06-02', '2015-06-03',
       '2015-06-04', '2015-06-05', '2015-06-06', '2015-06-07',
       '2015-06-08', '2015-06-09', '2015-06-10', '2015-06-11',
       '2015-06-12', '2015-06-13', '2015-06-14', '2015-06-15',
       '2015-06-16', '2015-06-17', '2015-06-18', '2015-06-19',
       '2015-06-20', '2015-06-21', '2015-06-22', '2015-06-23',
       '2015-06-24', '2015-06-25', '2015-06-26', '2015-06-27',
       '2015-06-28', '2015-06-29', '2015-06-30', '2015-07-01',
       '2015-07-02', '2015-07-03', '2015-07-04', '2015-07-05',
       '2015-07-06', '2015-07-07', '2015-07-08', '2015-07-09',
       '2015-07-10', '2015-07-11', '2015-07-12', '2015-07-13',
       '2015-07-14', '2015-07-15', '2015-07-16', '2015-07-17',
       '2015-07-18', '2015-07-19', '2015-07-20', '2015-07-21',
       '2015-07-22', '2015-07-23', '2015-07-24', '2015-07-25',
       '2015-07-26', '2015-07-27', '2015-07-28', '2015-07-29',
       '2015-07-30', '2015-07-31', '2015-08-01', '2015-08-02',
       '2015-08-03', '2015-08-04', '2015-08-05', '2015-08-06',
       '2015-08-07', '2015-08-08', '2015-08-09', '2015-08-10',
       '2015-08-11', '2015-08-12', '2015-08-13', '2015-08-14',
       '2015-08-15', '2015-08-16', '2015-08-17', '2015-08-18',
       '2015-08-19', '2015-08-20', '2015-08-21', '2015-08-22',
       '2015-08-23', '2015-08-24', '2015-08-25', '2015-08-26',
       '2015-08-27', '2015-08-28', '2015-08-29', '2015-08-30',
       '2015-08-31', '2015-09-01', '2015-09-02', '2015-09-03',
       '2015-09-04', '2015-09-05', '2015-09-06', '2015-09-07',
       '2015-09-08', '2015-09-09', '2015-09-10', '2015-09-11',
       '2015-09-12', '2015-09-13', '2015-09-14', '2015-09-15',
       '2015-09-16', '2015-09-17', '2015-09-18', '2015-09-19',
       '2015-09-20', '2015-09-21', '2015-09-22', '2015-09-23',
       '2015-09-24', '2015-09-25', '2015-09-26', '2015-09-27',
       '2015-09-28', '2015-09-29', '2015-09-30', '2015-10-01',
       '2015-10-02', '2015-10-03', '2015-10-04', '2015-10-05',
       '2015-10-06', '2015-10-07', '2015-10-08', '2015-10-09',
       '2015-10-10', '2015-10-11', '2015-10-12', '2015-10-13',
       '2015-10-14', '2015-10-15', '2015-10-16', '2015-10-17',
       '2015-10-18', '2015-10-19', '2015-10-20', '2015-10-21',
       '2015-10-22', '2015-10-23', '2015-10-24', '2015-10-25',
       '2015-10-26', '2015-10-27', '2015-10-28', '2015-10-29',
       '2015-10-30', '2015-10-31', '2015-11-01', '2015-11-02',
       '2015-11-03', '2015-11-04', '2015-11-05', '2015-11-06',
       '2015-11-07', '2015-11-08', '2015-11-09', '2015-11-10',
       '2015-11-11', '2015-11-12', '2015-11-13', '2015-11-14',
       '2015-11-15', '2015-11-16', '2015-11-17', '2015-11-18',
       '2015-11-19', '2015-11-20', '2015-11-21', '2015-11-22',
       '2015-11-23', '2015-11-24', '2015-11-25', '2015-11-26',
       '2015-11-27', '2015-11-28', '2015-11-29', '2015-11-30',
       '2015-12-01', '2015-12-02', '2015-12-03', '2015-12-04',
       '2015-12-05', '2015-12-06', '2015-12-07', '2015-12-08',
       '2015-12-09', '2015-12-10', '2015-12-11', '2015-12-12',
       '2015-12-13', '2015-12-14', '2015-12-15', '2015-12-16',
       '2015-12-17', '2015-12-18', '2015-12-19', '2015-12-20',
       '2015-12-21', '2015-12-22', '2015-12-23', '2015-12-24',
       '2015-12-25', '2015-12-26', '2015-12-27', '2015-12-28',
       '2015-12-29', '2015-12-30', '2015-12-31', '2016-01-01',
       '2016-01-02', '2016-01-03', '2016-01-04', '2016-01-05',
       '2016-01-06', '2016-01-07', '2016-01-08', '2016-01-09',
       '2016-01-10', '2016-01-11', '2016-01-12', '2016-01-13',
       '2016-01-14', '2016-01-15', '2016-01-16', '2016-01-17',
       '2016-01-18', '2016-01-19', '2016-01-20', '2016-01-21',
       '2016-01-22', '2016-01-23', '2016-01-24', '2016-01-25',
       '2016-01-26', '2016-01-27', '2016-01-28', '2016-01-29']

    volume = [ 21056800,  34483200,  37919700,  36863600,  26580100,  24127600,
        45099500,  30627700,  26814400,  21460800,  15029300,  23613300,
        32497700,  34707300,  26229400,  21777700,  30901200,  47236500,
        83308096,  79011800,  49199900,  54736300,  83641104,  43665700,
        13345200,  17552800,  35221400,  38491500,  25267100,  26990000,
        13600700,  11416800,   5914570,  16419000,  14188900,  11641300,
        26456900,  15585700,  18127500,  11272500,  13033000,   7845880,
        18192700,  30177900,  12545400,  16677200,   8603620,  12948500,
        15655500,  19817200,  18797000,  16834200,   8535470,  24205600,
        30450100,  15838900,  45783200,  58945000,  29589200,  15727500,
        11905600,  41518800,  32222500,  18931800,  25233200,  29850100,
        15273000,  15151600,  30930100,  25442200,  18601700,   8748030,
        22946500,  15375600,   9194440,  11763000,  12364100,  13340100,
        14529600,  15181800,   7009320,   6491650,  18898700,  32915500,
        16427700,  32431300,  16989800,  11675900,  12415200,  17264200,
        30864900,  37567900,  39173000,  23823100,  20856700,  15207600,
        22315100,  16574200,  15092300,   9883640,  16410500,  15185200,
        11676600,  12302500,  12528300,  13942900,   8036550,   7860650,
        33054400,  55629100,  43962800,  23245700,  24866800,  19982500,
        18718600,  15264300,  18200800,  18880300,  72843904,  97638704,
        81773504,  38421000,  23469700,  30085100,  18658300,  24051100,
        29924600,  33544600,  24621700,  24782500,  33582700, 106794000,
        44399000,  44352200,  32213400,  26605200,  23348200,  29128500,
        30612100,  40783700,  26594300,  22516400,  24435300,  21604200,
        17145200,  27791300,  21115100,  17201900,  15206200,  42744400,
        49732500,  56552400,  28153700,  27363100,  25200800,  18270500,
        23876700,  12284200,  19527000,  16400000,  14200400,  11496200,
        13619400,  44013900,  13949300,  25213700,  40465700,  50461300,
        41383000,  41302400,  28918900,  17825900,  22067900,  59178200,
        67770800,  33963900,  32585200,  31421500,  22612300,  11970100,
        21516100,  21497200,  57008000,  52732000,  18456700,  17130100,
        18438100,  22811900,  40073700,  35866900,  25730000,  17274900,
        16040900,  21699400,  23009600,  22672000,  22877200,  26272600,
        23146600,  12493500,  19649200,  20034200,  18467400,  30086400,
        21643500,  28882000,  16365200,  12387900,  31181800,  31719000,
        22562000,  24805400,  20429800,  12939000,  15021500,  18364700,
        24978000,  23847900,  17036000,  21448700,  13957200,  28943700,
        38574000,  21469200,  18936500,  33818600,  18815300,  12535500,
        18494100,  21223400,  23929100,  29587200,  29064400,  27445500,
        19790500,  15019100,  20892300,  19282600,  27180100,  24413700,
        16329400,  11089700,  11134300,  16780300,  14241900,  15499400,
        15108900,  27003000,  14605000,  11508000,  14423900,  16425000,
        18837000,  13829600,  14805000,  14098600,  14730800,  26090500,
        20459000,  17752400,  14728100,  18056500,  11131500,  13318400,
        23378400,  28353100,  15904800,  14416000,  14017700,  13305300,
        12165900,  19912100,  41612000,  43858400,  30980200,  23965300,
        20608100,  10600900,  17692500,  15108700,  17344900,  16133100,
        13983500,  20488600,  15137600,  34742900,  44533800,  27029800,
        21551900,  19033800,  15620400,  44156100,  49154800,  28857600,
        36980200,  40301200, 100390000,  41109900,  56405000,  62053900,
        28727200,  27486600,  49482600,  27591400,  25187100,  15332500,
        22711400,  22930700,  19389800,  18531300,  37199400,  20662200,
        16032300,  30592000,  25453600,  24672600,  21635800,  23629100,
        18995000,  17722200,  21474100,  21908700,  20128000,  18792100,
        42484800,  58533000,  23789600,  20979400,  25433900,  26815400,
        27685500,  27091200,  19321100,  29717000,  21617900,  42147200,
        60869200,  32275000,  23173800,  23205900,  18406600,  59220700,
        61089200,  31808000,  21905400,  31336600,  17142500,  19412600,
        20710700,  20575200,  18760400,  17482000,  20962400,  20671400,
        25473700,  21192200,  26879200,  23635700,  21215500,  19224700,
        17962600,  18478800,  20997800,  19177800,  20144200,  18935400,
        20242200,  12712600,  14444700,  19678800,  25009300,  17254100,
        25097800,  22363600,  13724100,  14179900,  24713000,  22691300,
        19743500,  20488800,  19677900,  16482700,  12999000,  23335900,
        27535100,  22999200,  18515300,  17353100,  15912700,  16827300,
        17388300,  28198500,  27462600,  25223500,  35901500,  43199600,
        22434300,  25258800,  30889800,  25637300,  37808600,  29442500,
        25942400,  45717100,  32108800,  46331800,  50808100,  64495900,
        78305000,  48598100,  37001100, 101918000, 206162000, 263900000,
       151824992, 122687000,  56625100,  51817600,  68224400,  95797904,
       107070000,  78477800,  52003000,  38612000,  44213100,  47980100,
        51001600,  43783800,  45011100,  53152900,  28200500,  23439400,
        27478900,  29362600,  41666900, 106105000,  55179100,  36816600,
        40409300,  71701600,  60452200,  54160500,  50714900,  35784100,
        66282200,  77762000,  63455800,  57801400,  90917200,  52138900,
       110944000, 131969000,  55050600, 130496000,  83121104, 107944000,
        47978400,  60220100,  47892700,  75409400,  77639696,  50840400,
        47161400,  57157200,  39078500, 116166000,  53591200,  49638600,
        51596500,  46889400,  45996600,  36278900,  30096600,  39633800,
        38477500,  34522600,  34042500,  87562200,  56993000,  32278000,
        35995900,  40450000, 115607000, 173888000,  43945500, 153351008,
       120352000,  45319600,  54403900,  46819800, 121720000,  68338000,
        91546600,  56247400,  54824800,  59062400,  58147000,  47424400,
        59247900,  86125296]

    fig = make_subplots(rows=2, cols=1, shared_xaxes=True,  subplot_titles=[
            'Price and Moving Averages of {}'.format(str(crypto_name)),
            'Volume of {}'.format(str(crypto_name))])
    # Lineplots of price and moving averages
    fig.add_trace(go.Scatter(
                            x = date,
                            y = close,
                            name = crypto_name,
                            mode='lines',
                            line = dict(color="red")), row = 1, col = 1)

    # Barplot of volume
    fig.add_trace(go.Bar(x = date,
                    y = volume,
                    name = 'Volume',
                    marker = dict(color="red", opacity = True)), row = 2, col = 1)
    # Add titles
    fig.update_layout(
            title = 'Price of (FIRST_GRAPH) {}'.format(str(crypto_name)))
    fig['layout']['yaxis1']['title']='US Dollars'
    fig['layout']['yaxis2']['title']='Volume'
    # X-Axes
    fig.update_xaxes(
        rangeslider_visible = True,
        rangeselector = dict(
            buttons = list([
                dict(count = 7, label = "1W", step = "day", stepmode = "backward"),
                dict(count = 28, label = "1M", step = "day", stepmode = "backward"),
                dict(count = 6, label = "6M", step = "month", stepmode = "backward"),
                dict(count = 1, label = "YTD", step = "year", stepmode = "todate"),
                dict(count = 1, label = "1Y", step = "year", stepmode = "backward"),
                dict(count = 3, label = "3Y", step = "year", stepmode = "backward"),
                dict(count = 5, label = "5Y", step = "year", stepmode = "backward"),
                dict(step = "all")])))
    fig.update_layout(xaxis_rangeslider_visible = False)
    fig.update_yaxes(tickprefix = '$', tickformat = ',.', row = 1, col = 1)
    #time buttons
    fig.update_xaxes(rangeselector= {'visible' :False}, row = 2, col = 1)


    #plot_div = py.plot(fig, include_plotlyjs=False, output_type='div')
    #print(plot_div)
    ##print(plot_div) prints the necessary script!!

    graph = fig.to_html(full_html=False, default_height=1000, default_width=1500)

    return graph
